
# Урок 4: Админка Django и работа с формами

**Цель урока:**  
Научить студентов работать с административной панелью Django и создавать формы для взаимодействия с данными. После этого урока студенты смогут управлять своими моделями через админку и создавать пользовательские формы для ввода и редактирования данных.

---

### 1. Административная панель Django

Админка Django — это мощный инструмент для управления моделями и данными через веб-интерфейс. Она автоматически создается при создании модели и зарегистрированной в админке.

#### Основные моменты:
- Админка предоставляет удобный интерфейс для работы с данными, не требующий написания кода.
- Чтобы получить доступ к админке, нужно создать суперпользователя.
- Модели нужно зарегистрировать в файле `admin.py`, чтобы они отображались в админке.

#### Шаги для настройки админки:

1. **Создание суперпользователя**:
   ```bash
   python manage.py createsuperuser
   ```

2. **Регистрация модели в админке**:
   Откройте файл `admin.py` в вашем приложении и добавьте модель:
   ```python
   from django.contrib import admin
   from .models import Post

   admin.site.register(Post)
   ```

3. **Запустите сервер и перейдите в админку**:
   Откройте [http://127.0.0.1:8000/admin/](http://127.0.0.1:8000/admin/) и войдите под суперпользователем.

Теперь вы можете управлять моделями через веб-интерфейс.

---

### 2. Django Forms (Формы)

Формы в Django используются для получения данных от пользователей и обработки этих данных. Django предоставляет встроенные формы для работы с моделями (ModelForms) и обычные формы (Forms).

#### Основные моменты:
- **ModelForm** позволяет автоматически генерировать форму на основе модели.
- Формы могут быть использованы для создания, редактирования и удаления записей.
- Форма передает данные в представление через POST запрос.

#### Пример использования ModelForm:

1. **Создание формы на основе модели**:
   Откройте файл `forms.py` и создайте форму:
   ```python
   from django import forms
   from .models import Post

   class PostForm(forms.ModelForm):
       class Meta:
           model = Post
           fields = ['title', 'content']
   ```

2. **Использование формы в представлении**:
   Откройте файл `views.py` и добавьте представление для создания поста:
   ```python
   from django.shortcuts import render, redirect
   from .forms import PostForm

   def create_post(request):
       if request.method == "POST":
           form = PostForm(request.POST)
           if form.is_valid():
               form.save()
               return redirect('home')
       else:
           form = PostForm()
       return render(request, 'create_post.html', {'form': form})
   ```

3. **Создание шаблона для отображения формы**:
   Создайте файл `create_post.html` в папке `templates`:
   ```html
   <h2>Создать новый пост</h2>
   <form method="POST">
       {% csrf_token %}
       {{ form.as_p }}
       <button type="submit">Создать</button>
   </form>
   ```

Теперь пользователи смогут создавать новые посты через форму.

---

### Практическое задание

1. Создайте новую модель для хранения комментариев. Свяжите комментарии с постами через отношение "один ко многим".
2. Добавьте модель комментариев в админку.
3. Создайте форму для добавления комментариев к постам. Используйте ModelForm для создания формы.
4. Реализуйте отображение комментариев под каждым постом.
